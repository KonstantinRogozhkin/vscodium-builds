# VSCodium Build Workflows

Этот репозиторий содержит GitHub Actions workflows для автоматической сборки VSCodium под различные платформы.

## Доступные Workflows

### 1. `build-windows.yml` - Автоматическая сборка для Windows

**Триггеры:**
- Push в ветки `master` или `main`
- Pull Request в ветки `master` или `main`
- Ручной запуск через `workflow_dispatch`

**Возможности:**
- Сборка для архитектур x64 и arm64
- Создание .exe, .msi и .zip файлов
- Автоматическая загрузка артефактов
- Генерация checksums

**Ручной запуск:**
1. Перейдите в раздел "Actions" вашего репозитория
2. Выберите "Build Windows"
3. Нажмите "Run workflow"
4. Выберите архитектуру (x64 или arm64)

### 2. `manual-build.yml` - Универсальная сборка

**Триггеры:**
- Только ручной запуск через `workflow_dispatch`

**Возможности:**
- Сборка для Windows, macOS и Linux
- Выбор архитектуры (x64 или arm64)
- Возможность пропустить этап компиляции
- Создание всех типов пакетов для выбранной платформы

**Ручной запуск:**
1. Перейдите в раздел "Actions" вашего репозитория
2. Выберите "Manual Build"
3. Нажмите "Run workflow"
4. Выберите:
   - Платформу (windows/macos/linux)
   - Архитектуру (x64/arm64)
   - Опционально: пропустить компиляцию

## Артефакты

После успешной сборки вы найдете следующие артефакты:

### Windows
- `VSCodium-{version}-{arch}.exe` - Установщик
- `VSCodium-{version}-{arch}.msi` - MSI пакет
- `VSCodium-{version}-{arch}.zip` - Портативная версия
- `*.sha256` - Контрольные суммы

### macOS
- `VSCodium-{version}-{arch}.dmg` - DMG образ
- `VSCodium-{version}-{arch}.zip` - ZIP архив
- `*.sha256` - Контрольные суммы

### Linux
- `VSCodium-{version}-{arch}.deb` - DEB пакет
- `VSCodium-{version}-{arch}.rpm` - RPM пакет
- `VSCodium-{version}-{arch}.tar.gz` - TAR архив
- `VSCodium-{version}-{arch}.AppImage` - AppImage
- `*.sha256` - Контрольные суммы

## Требования

### Secrets (для приватных репозиториев)
- `GITHUB_TOKEN` - автоматически предоставляется GitHub

### Переменные окружения
Все необходимые переменные уже настроены в workflows.

## Время сборки

Примерное время сборки:
- **Компиляция**: 15-25 минут
- **Windows сборка**: 10-15 минут
- **macOS сборка**: 15-20 минут  
- **Linux сборка**: 10-15 минут

## Устранение неполадок

### Ошибки сборки
1. Проверьте логи в разделе Actions
2. Убедитесь, что все зависимости установлены
3. Проверьте совместимость версий Node.js и Python

### Недостаток места
Если возникают ошибки нехватки места:
1. Workflows автоматически очищают кэш
2. Артефакты хранятся ограниченное время
3. Можно уменьшить retention-days в workflow

### Таймауты
Workflows настроены на максимальное время выполнения:
- Компиляция: 60 минут
- Сборка: 45 минут

## Кастомизация

Вы можете изменить workflows под свои нужды:

1. **Изменить версии зависимостей** в секциях `setup-node` и `setup-python`
2. **Добавить дополнительные архитектуры** в matrix strategy
3. **Изменить время хранения артефактов** через `retention-days`
4. **Добавить дополнительные триггеры** в секцию `on`

## Примеры использования

### Быстрая сборка для Windows x64
```bash
# Запустите workflow "Build Windows" с параметром vscode_arch: x64
```

### Сборка для всех платформ
```bash
# Запустите workflow "Manual Build" три раза:
# 1. platform: windows, architecture: x64
# 2. platform: macos, architecture: arm64  
# 3. platform: linux, architecture: x64
```

### Использование существующей компиляции
```bash
# Запустите "Manual Build" с параметром skip_compile: true
# Это использует артефакт из предыдущей сборки
```
